import{d as L,o,c as h,a as e,t as _,f,E as oe,G as ie,H as ne,I as le,J as ce,K as de,L as _e,M as re,p as E,e as H,_ as x,B as P,C as b,u as W,g as v,b as a,r as g,N as Ae,O as Se,A as $,w as T,x as Te,P as Ve,Q as Ne,R as se,h as F,F as J,k as ae,S as D}from"./index-0df02ba8.js";import{_ as Ee,a as He,L as C,D as ge,w as Re,t as je,m as Be,u as Me,h as V,A as N,c as te,b as Ue}from"./deployments.mainnet-7d7aee41.js";import"./icon_close-84a1ab56.js";const Oe="https://cdn.jsdelivr.net/gh/linefi/website/assets/airdrop_bg_phone-2e16d137.png",Fe="https://cdn.jsdelivr.net/gh/linefi/website/assets/airdrop_bg_pc-5bbaea50.png",Je="https://cdn.jsdelivr.net/gh/linefi/website/assets/airdrop_all_animal-dcd4ec0b.png",Pe="https://cdn.jsdelivr.net/gh/linefi/website/assets/wiwi_slide_pic-5590f0d1.png",pe=t=>(E("data-v-d1d824dd"),t=t(),H(),t),We={class:"animal-box"},qe={class:"animal-info"},Ge={class:"animal-type"},Ke={class:"animal-pic"},Qe=["src"],Ye={class:"animal-att"},ze={class:"animal-level"},Xe=pe(()=>e("img",{src:Ee,alt:""},null,-1)),Ze={class:"animal-glamour"},es=pe(()=>e("img",{src:He,alt:""},null,-1)),ss=L({__name:"animal_card",props:{animalData:{default:{}}},setup(t){const d=t;function n(i){return new URL(Object.assign({"../../../assets/images/home/aki.gif":oe,"../../../assets/images/home/aoao.gif":ie,"../../../assets/images/home/bebe.gif":ne,"../../../assets/images/home/cici.gif":le,"../../../assets/images/home/dndn.gif":ce,"../../../assets/images/home/fofo.gif":de,"../../../assets/images/home/rara.gif":_e,"../../../assets/images/home/wiwi.gif":re})[`../../../assets/images/home/${i}.gif`],self.location).href}return(i,r)=>(o(),h("div",We,[e("div",qe,[e("p",Ge,_(d.animalData.role),1),e("p",null,"#"+_(i.$filter.tokenId(d.animalData.tokenid)),1)]),e("div",Ke,[e("img",{src:n(d.animalData.role),alt:""},null,8,Qe)]),e("div",Ye,[e("div",ze,[Xe,f(" Lv."+_(d.animalData.level),1)]),e("div",Ze,[es,f(" "+_(d.animalData.energy),1)])])]))}});const as=x(ss,[["__scopeId","data-v-d1d824dd"]]),ts="https://cdn.jsdelivr.net/gh/linefi/website/assets/animal_egg-9be6bb19.png",ue=t=>(E("data-v-6610e73e"),t=t(),H(),t),os={class:"egg-card"},is=ue(()=>e("div",{class:"egg-name"},"Common",-1)),ns={class:"egg-pic"},ls=ue(()=>e("img",{src:ts,alt:""},null,-1)),cs={class:"egg-id"},ds={class:"card-btn"},_s=L({__name:"egg_card",props:{tokenId:{default:0}},emits:["openDialog"],setup(t,{emit:d}){const n=t,i=()=>{d("openDialog")};return(r,p)=>(o(),h("div",os,[is,e("div",ns,[ls,e("div",cs,"#"+_(r.$filter.tokenId(n.tokenId)),1)]),e("div",ds,[P(C,{onClick:i},{default:b(()=>[f(" Hatching ")]),_:1})])]))}});const rs=x(_s,[["__scopeId","data-v-6610e73e"]]),gs="https://cdn.jsdelivr.net/gh/linefi/website/assets/hatching_one_egg-7910fc1a.png",ps=t=>(E("data-v-77fd8808"),t=t(),H(),t),us={class:"dialog-content"},ms=ps(()=>e("img",{src:gs,alt:""},null,-1)),hs={class:"btn-box"},vs=L({__name:"airdrop_dialog_content",props:{loading:{type:Boolean,default:!1}},emits:["closeDialog","hatching"],setup(t,{emit:d}){const n=t,{t:i}=W(),r=()=>{d("closeDialog")};return(p,u)=>(o(),v(ge,{onCloseDialog:r},{default:b(()=>[e("div",us,[ms,e("p",null,_(a(i)("airdrop.commonegg")),1),e("div",hs,[P(C,{onClick:u[0]||(u[0]=y=>d("hatching")),loading:n.loading},{default:b(()=>[f("Hatching")]),_:1},8,["loading"])])])]),_:1}))}});const fs=x(vs,[["__scopeId","data-v-77fd8808"]]),bs={class:"dialog-content"},ys={class:"animal-pic"},$s=["src"],ws={class:"btn-box"},ks=L({__name:"hatch_success_dialog",props:{animalData:{default:null}},emits:["closeDialog"],setup(t,{emit:d}){const n=t,{t:i}=W(),r=()=>{d("closeDialog")};function p(u){return new URL(Object.assign({"../../../assets/images/home/aki.gif":oe,"../../../assets/images/home/aoao.gif":ie,"../../../assets/images/home/bebe.gif":ne,"../../../assets/images/home/cici.gif":le,"../../../assets/images/home/dndn.gif":ce,"../../../assets/images/home/fofo.gif":de,"../../../assets/images/home/rara.gif":_e,"../../../assets/images/home/wiwi.gif":re})[`../../../assets/images/home/${u}.gif`],self.location).href}return(u,y)=>(o(),v(ge,{onCloseDialog:r},{default:b(()=>[e("div",bs,[e("div",ys,[e("img",{src:p(n.animalData.role),alt:""},null,8,$s)]),e("p",null,_(a(i)("airdrop.getAnimalTip")),1),e("div",ws,[P(C,{onClick:r},{default:b(()=>[f("Confirm")]),_:1})])])]),_:1}))}});const Is=x(ks,[["__scopeId","data-v-45aec453"]]),R=t=>(E("data-v-3630050f"),t=t(),H(),t),Ds=R(()=>e("div",{class:"airdrop-bg-box"},[e("img",{class:"phone-bg-img",src:Oe,alt:""}),e("img",{class:"pc-bg-img",src:Fe,alt:""}),e("div",{class:"bg-gradient"})],-1)),Cs={class:"airdrop-container"},Ls={class:"code-box"},xs=R(()=>e("img",{class:"all-animal-img",src:Je,alt:""},null,-1)),As={class:"code-info"},Ss={class:"code-title"},Ts={class:"code-input"},Vs=["placeholder"],Ns={class:"code-button"},Es={key:1},Hs={key:0,class:"success-claim"},Rs=R(()=>e("img",{src:Pe,alt:""},null,-1)),js={class:"animal-box"},Bs={class:"home-title"},Ms={key:0,class:"animal-list"},Us={key:1,class:"empyt-box"},Os=R(()=>e("img",{src:Ue,alt:""},null,-1)),Fs=L({__name:"airdrop",setup(t){const{locale:d,t:n}=W();var i=Re();const r=i.env=="testnet"?je:Be;var p=g("");const u=g(!1);var y=g(!1);Ae();var me=Se();g();var A=null,m=Me(),q=g(),j=g([]),B=g([]),G=null,K=null,S=g(0),w=g(!1),M=g(!1),Q=g(!1);const k=$(()=>i.web3);$(()=>m.isLiffLogin);const he=$(()=>m.liffloginLoading),ve=$(()=>i.connectLoading),Y=g(),U=$(()=>m.isLogin),z=$(()=>m.address),X=$(()=>i.coinbase);T(z,s=>{}),T(X,s=>{}),T(U,s=>{s&&O()}),T(k.value,(s,l)=>{Y.value=!0,we()}),Te(()=>{m.init(),me.query.code?m.linefiInit():i.init()});const fe=s=>{A=s+"",u.value=!0},be=()=>{u.value=!1},ye=()=>{m.loginLineFi()},$e=()=>{i.connectWallet(s=>{i.sign(s,m.nonce)})},we=()=>{if(k.value.web3Instance){var s=k.value.web3Instance();G=new s.eth.Contract(r.EggAirdrop.abi,r.EggAirdrop.address,{from:k.value.coinbase}),K=new s.eth.Contract(r.EggShop.abi,r.EggShop.address,{from:k.value.coinbase}),Z()}},Z=async()=>{S.value=await te.call(K,"whitelists",[k.value.coinbase])},O=()=>{V.post({path:N.ANIMAL_LIST}).then(s=>{s.code==0&&(j.value=s.data.eggs,B.value=s.data.animals)}).catch(s=>{console.log(s)})},ke=()=>{if(w.value=!0,p.value.length<8){D({message:"The code is invaild",position:"top"}),w.value=!1;return}V.post({path:N.AIRDROP_CLAIM,data:{code:p.value}}).then(s=>{if(s.code==0){var l=s.data.signature;Ie(p.value,s.data.type,s.data.egg_type,l)}else{w.value=!1;var c=s.msg;D({message:c,position:"top"})}}).catch(s=>{console.log(s)})};var Ie=(s,l,c,ee)=>{var Le=m.userId,xe={contract:G,key:"claim",args:[Le,s,l,c,ee],onTxHash:I=>{console.log(I)},onReceipt:I=>{w.value=!1,u.value=!0,A=Number(I.events[0].raw.topics[3])+"",De(A),Q.value=!0,setTimeout(()=>{Q.value=!1},1e3),D({message:"Successful",position:"top"}),Z()},onError:I=>{console.log(I),w.value=!1,D({message:I,position:"top"})}};te.send(xe)};const De=s=>{V.post({path:N.ANIMAL_SYNC,data:{tokenIds:s}}).then(l=>{l.code==0&&O()}).catch(l=>{console.log(l)})},Ce=()=>{M.value=!0,V.post({path:N.ANIMAL_HATCH,data:{tokenIds:A}}).then(s=>{if(M.value=!1,u.value=!1,s.code==0)q.value=s.data.results[0],y.value=!0,O(),D({message:"Hatching Successful"});else{var l=s.msg;D({message:l,position:"top"})}}).catch(s=>{console.log(s)})};return(s,l)=>(o(),h(J,null,[Ds,e("div",Cs,[e("div",Ls,[xs,e("div",As,[e("p",Ss,_(a(n)("airdrop.enterCode")),1),e("div",Ts,[Ve(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=c=>se(p)?p.value=c:p=c),placeholder:a(n)("airdrop.placeholder")},null,8,Vs),[[Ne,a(p)]])]),e("div",Ns,[Y.value&&a(U)&&(a(X)||a(z))?(o(),v(C,{key:0,onClick:ke,loading:a(w)},{default:b(()=>[f(_(a(n)("airdrop.claim")),1)]),_:1},8,["loading"])):(o(),h("div",Es,[a(U)?(o(),v(C,{key:1,onClick:$e,loading:a(ve)},{default:b(()=>[f("Connect Wallet")]),_:1},8,["loading"])):(o(),v(C,{key:0,loading:a(he),onClick:ye},{default:b(()=>[f(_(a(n)("airdrop.line")),1)]),_:1},8,["loading"]))]))])])]),a(S)>0?(o(),h("div",Hs,[Rs,e("p",null,_(a(n)(`airdrop.${a(S)==0?"dirdropTip":a(S)==1?"dirdropwlTip":"dirdropogTip"}`)),1)])):F("",!0),e("div",js,[e("div",Bs,_(a(n)("airdrop.myNft")),1),a(B).length!=0||a(j).length!=0?(o(),h("div",Ms,[(o(!0),h(J,null,ae(a(j),c=>(o(),v(rs,{key:c.tokenid,tokenId:c.tokenid,eggType:c.eggType,onOpenDialog:ee=>fe(c.tokenid)},null,8,["tokenId","eggType","onOpenDialog"]))),128)),(o(!0),h(J,null,ae(a(B),c=>(o(),v(as,{key:c.tokenid,"animal-data":c},null,8,["animal-data"]))),128))])):(o(),h("div",Us,[Os,e("p",null,_(a(n)("airdrop.emptyTip")),1)]))])]),u.value?(o(),v(fs,{key:0,loading:a(M),onCloseDialog:be,onHatching:Ce},null,8,["loading"])):F("",!0),a(y)?(o(),v(Is,{key:1,"animal-data":a(q),onCloseDialog:l[1]||(l[1]=c=>se(y)?y.value=!1:y=!1)},null,8,["animal-data"])):F("",!0)],64))}});const qs=x(Fs,[["__scopeId","data-v-3630050f"]]);export{qs as default};
